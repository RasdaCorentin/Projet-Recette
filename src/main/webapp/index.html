<!DOCTYPE html>
<html>

    <head>
        <title>Recipe Web Service - Start Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!-- Latest compiled and minified CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="css/style.css">

        <!-- Latest compiled JavaScript -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!--FONT AWESOME-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <script src ="javascript/index.js" defer></script>
        <script src="javascript/script_lien.js"></script>
    </head>

    <body>

        <!--$ La barre de navigation. -->
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
            <div class="container-fluid">
                <ul class="navbar-nav">

                    <li class="nav-item">
                        <a class="nav-link active" href="/Projet-Recette/index.html">Accueil</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/Projet-Recette/adminpage.html">Admin</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="/Projet-Recette/myPage.html">Ma Page</a>
                    </li>

                    <li class="nav-item" id="cacherConnexion">
                        <a class="nav-link" href="/Projet-Recette/connexion.html">Se connecter</a>
                    </li>

                    <li class="nav-item" id="cacherInscription">
                        <a class="nav-link" href="/Projet-Recette/inscription.html">S'inscrire</a>
                    </li>

                    <li class="nav-item hide" id="elementAMontrer">
                        <a class="nav-link" href="/Projet-Recette/deconnexion.html">Se déconnecter</a>
                    </li>

                </ul>

                <form class="d-flex">
                    <input class="form-control me-2" type="text" placeholder="Chercher">
                    <button class="btn btn-success" type="button">Trouver</button>
                </form>

            </div>
        </nav>

        <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">

                    <img class="img-fluid d-block w-100" 
                        src="https://cdn.pixabay.com/photo/2017/06/06/22/46/mediterranean-cuisine-2378758_960_720.jpg" 
                        alt="cuisine méditerranéenne">

                </div>
                <div class="carousel-item">

                    <img class="img-fluid d-block w-100"
                        src="https://cdn.pixabay.com/photo/2017/06/29/19/57/sushi-2455981_960_720.jpg" 
                        alt="plateau sushi">

                </div>
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>

            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>

        </div>

        <div class="container-fluid">
            <div class="row justify-content-evenly">
                <div class="col-10" style="background: red; height: auto">

                    <h3 class="text-center">Liste recettes</h3>
                    <form class="d-flex">
                        <input id="searchbar" onkeyup="search_recettes()" class="form-control me-2" type="text" placeholder="Chercher">
                    </form>

                    <table class ="table table-stripped">
                        <tr>
                            <th>Libellé</th>
                        </tr>

                        <tbody id="ListRecettes" >

                        </tbody>
                    </table>
                </div>
            </div>
            <br><br>

            <div class="row justify-content-evenly">
                <div class="col-10" style="background: blue; height: auto">
                    <h3 class="text-center">Index ingrédients</h3>
                    <div id="letter-main" class="text-center"></div>
                    <h3 class="text-center">Liste ingrédients</h3>
                    <table class ="table table-stripped">
                        <tbody id="ListIng" >

                        </tbody> 
                    </table>
                </div>
            </div>

        </div>

        <div w3-include="javascript/footer.html"></div>
        <script> includeHTML();</script>

        <script>
            //. --------------------Les variables pour les hide and show.--------------------
            let cookieUtilisateur = getCookie("utilisateur");
            var cacherConnexion = document.getElementById("cacherConnexion");
            var cacherInscription = document.getElementById("cacherInscription");
            var elementAMontrer = document.getElementById("elementAMontrer");

            //. --------------------La méthode pour récupérer un cookie grâce à son nom.--------------------
            function getCookie(cname) {
                let name = cname + "=";
                let decodedCookie = decodeURIComponent(document.cookie);
                let ca = decodedCookie.split(";");

                for (let i = 0; i < ca.length; i++) {
                    let c = ca[i];
                    while (c.charAt(0) == " ") {
                        c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                        console.log(c.substring(name.length, c.length));
                        return c.substring(name.length, c.length);
                    }
                }

                return "";
            }

            //. --------------------Les hide and show.--------------------
            if (cookieUtilisateur != "") {
                cacherConnexion.classList.add('hide'); //: Permet de cacher le lien vers la page de connexion si l'utilisateur est déjà connecté.
                cacherInscription.classList.add('hide'); //: Permet de cacher le lien vers la page d'inscription si l'utilisateur est déjà connecté.
                elementAMontrer.classList.remove('hide'); //: Permet de montré le lien vers la page de déconnexion si l'utilisateur est connecté.
            }
        </script>

    </body>
</html>